<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבון CrediblePlus פרימיום</title>
    <!-- React & Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@200;300;400;500;600;700;800&display=swap');
        body { font-family: 'Assistant', sans-serif; background-color: #0f172a; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #c89644; border-radius: 10px; }
        
        input[type="number"], input[type="text"] { 
            font-size: 20px !important; 
            text-align: center !important;
        }
        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const Logo = () => (
            <svg viewBox="0 0 301.68 65.71" className="w-full max-w-[260px] h-auto mx-auto">
                <defs>
                    <linearGradient id="lg-gold-main" x1="0" y1="0" x2="1" y2="1">
                        <stop offset="0" stopColor="#9c7229"/><stop offset=".31" stopColor="#c89644"/><stop offset=".64" stopColor="#d4a55f"/><stop offset="1" stopColor="#f6d19c"/>
                    </linearGradient>
                </defs>
                <g fill="#ffffff">
                    <path d="m100.87,59.41v-3.86c0-.37-.12-.49-.46-.49h-.14c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h.61c.68,0,1.11.35,1.11,1.03v4.35c0,.14-.08.21-.21.21h-.69c-.14,0-.21-.08-.21-.21Z"/><path d="m110.13,62.95l-3.49-5.02c-1.32.77-1.6,2.09-1.6,3.1,0,.91.17,1.38.31,1.84.05.14-.05.23-.18.23h-.68c-.15,0-.21-.09-.26-.23-.14-.43-.31-1.04-.31-1.9,0-1.46.48-3.03,2.1-3.92l-1.92-2.76c-.09-.12-.03-.25.11-.25h.86c.12,0,.18.05.26.15l3.26,4.68c1.4-.71,1.69-1.9,1.69-2.93,0-.74-.15-1.21-.29-1.69-.03-.12.04-.21.18-.21h.69c.14,0,.2.09.25.23.14.41.29,1,.29,1.78,0,1.41-.51,2.86-2.2,3.72l2.15,3.09c.09.12.03.25-.11.25h-.86c-.12,0-.18-.05-.26-.15Z"/><path d="m118.85,62.89v-5.7c0-1.44-.43-2.1-2.04-2.1h-3.49c-.14,0-.21-.08-.21-.21v-.61c0-.14.08-.21.21-.21h3.96c1.83,0,2.72,1.06,2.72,2.67v6.17c0,.14-.08.21-.21.21h-.72c-.14,0-.21-.08-.21-.21Z"/><path d="m122.48,59.06v-4.81c0-.14.08-.21.21-.21h.72c.14,0,.21.08.21.21v3.62h.68c1.49,0,2.06-.52,2.06-1.78v-1.84c0-.14.08-.21.21-.21h.69c.14,0,.21.08.21.21v1.97c0,1.6-.83,2.66-2.99,2.66h-.86c.03,2.47,1.12,3.23,3.29,3.23s3.27-.78,3.27-3.35v-4.5c0-.14.08-.21.21-.21h.72c.14,0,.21.08.21.21v4.81c0,2.84-1.52,4.16-4.42,4.16s-4.44-1.32-4.44-4.16Z"/><path d="m139.73,62.95l-3.49-5.02c-1.32.77-1.6,2.09-1.6,3.1,0,.91.17,1.38.31,1.84.05.14-.05.23-.18.23h-.68c-.15,0-.21-.09-.26-.23-.14-.43-.31-1.04-.31-1.9,0-1.46.48-3.03,2.1-3.92l-1.92-2.76c-.09-.12-.03-.25.11-.25h.86c.12,0,.18.05.26.15l3.26,4.68c1.4-.71,1.69-1.9,1.69-2.93,0-.74-.15-1.21-.29-1.69-.03-.12.04-.21.18-.21h.69c.14,0,.2.09.25.23.14.41.29,1,.29,1.78,0,1.41-.51,2.86-2.2,3.72l2.15,3.09c.09.12.03.25-.11.25h-.86c-.12,0-.18-.05-.26-.15Z"/><path d="m146.36,59.41v-3.86c0-.37-.12-.49-.46-.49h-.14c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h.61c.68,0,1.11.35,1.11,1.03v4.35c0,.14-.08.21-.21.21h-.69c-.14,0-.21-.08-.21-.21Z"/><path d="m150.2,62.89v-7.33c0-.37-.12-.49-.46-.49h-.58c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h1.11c.68,0,1.09.35,1.09,1.03v7.82c0,.14-.08.21-.21.21h-.72c-.14,0-.21-.08-.21-.21Z"/><path d="m154.09,62.89v-7.33c0-.37-.12-.49-.46-.49h-.58c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h1.11c.68,0,1.09.35,1.09,1.03v7.82c0,.14-.08.21-.21.21h-.72c-.14,0-.21-.08-.21-.21Z"/><path d="m157.53,59.41v-3.86c0-.37-.12-.49-.46-.49h-.14c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h.61c.68,0,1.11.35,1.11,1.03v4.35c0,.14-.08.21-.21.21h-.69c-.14,0-.21-.08-.21-.21Z"/><path d="m161.05,62.89v-.61c0-.14.08-.21.21-.21h.17c3.41,0,4.82-2.83,4.82-6.14v-.52c0-.2-.08-.31-.28-.31h-5.1c-.34,0-.52-.21-.52-.55v-1.97c0-.14.08-.21.21-.21h.71c.14,0,.21.08.21.21v1.47h5.25c.37,0,.64.28.64.66v1.55c0,3.64-1.98,6.85-5.81,6.85h-.32c-.14,0-.21-.08-.21-.21Z"/><path d="m170.2,62.89v-7.33c0-.37-.12-.49-.46-.49h-.58c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h1.11c.68,0,1.09.35,1.09,1.03v7.82c0,.14-.08.21-.21.21h-.72c-.14,0-.21-.08-.21-.21Z"/><path d="m176.45,65.5v-11.24c0-.14.08-.21.22-.21h.72c.14,0,.21.08.21.21v4.87h1.15c2.13,0,2.79-.86,2.79-2.32v-2.55c0-.14.08-.21.22-.21h.72c.14,0,.21.08.21.21v2.66c0,1.77-.91,3.26-3.62,3.26h-1.47v5.33c0,.14-.08.21-.21.21h-.72c-.14,0-.22-.08-.22-.21Z"/><path d="m185.28,62.89v-7.33c0-.37-.12-.49-.46-.49h-.58c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h1.11c.68,0,1.09.35,1.09,1.03v7.82c0,.14-.08.21-.21.21h-.72c-.14,0-.21-.08-.21-.21Z"/><path d="m187.92,62.89v-.61c0-.14.08-.21.21-.21h2.13l-1.69-7.8c-.03-.14.08-.21.21-.21h.74c.14,0,.18.08.21.21l1.67,7.79c2.03-.18,2.92-1.44,2.92-3.49v-4.3c0-.14.08-.21.21-.21h.72c.14,0,.21.08.21.21v4.75c0,2.4-1.52,4.1-4.15,4.1h-3.21c-.14,0-.21-.08-.21-.21Z"/><path d="m197.71,59.41v-3.86c0-.37-.12-.49-.46-.49h-.14c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h.61c.68,0,1.11.35,1.11,1.03v4.35c0,.14-.08.21-.21.21h-.69c-.14,0-.21-.08-.21-.21Z"/><path d="m201.1,59.41v-3.86c0-.37-.12-.49-.46-.49h-.14c-.14,0-.2-.08-.2-.21v-.6c0-.14.06-.21.2-.21h.61c.68,0,1.11.35,1.11,1.03v4.35c0,.14-.08.21-.21.21h-.69c-.14,0-.21-.08-.21-.21Z"/>
                    <path d="m59.83.12c-6.52,0-9.2,4.63-9.2,10.78v21.81c0,6.15,2.68,10.78,9.2,10.78s9.2-4.63,9.2-10.78v-4.87h-2.68v5.06c0,4.57-1.77,7.98-6.46,7.98s-6.46-3.41-6.46-7.98V10.72c0-4.57,1.77-8.04,6.46-8.04s6.46,3.47,6.46,8.04v3.72h2.68v-3.53c0-6.15-2.68-10.78-9.2-10.78Z"/><path d="m91.63,31.38c0-4.63-1.77-7.74-6.15-8.71,4.2-.97,6.15-3.84,6.15-8.83v-3.72c0-6.03-2.62-9.63-9.14-9.63h-8.89v42.65h2.8v-19.07h4.45c4.87,0,7.98,1.58,7.98,7.25v6.7c0,2.32.18,3.84.91,5.12h2.92c-.91-1.4-1.03-3.35-1.03-5.12v-6.64Zm-15.23-9.87V3.05h6.03c4.63,0,6.4,2.74,6.4,7.31v4.02c0,5.73-2.92,7.13-7.92,7.13h-4.51Z"/><polygon points="97.11 43.13 113.93 43.13 113.93 40.58 99.91 40.58 99.91 22.79 111.55 22.79 111.55 20.23 99.91 20.23 99.91 3.05 113.93 3.05 113.93 .49 97.11 .49 97.11 43.13"/><path d="m127.88.49h-9.38v42.65h9.38c6.58,0,9.44-4.33,9.44-10.6V11.09c0-6.28-2.86-10.6-9.44-10.6Zm6.64,32.17c0,4.69-1.95,7.92-6.7,7.92h-6.52V3.05h6.52c4.69,0,6.7,3.23,6.7,7.92v21.69Z"/><rect x="141.95" y=".49" width="2.8" height="42.65"/><path d="m161.69,20.41c4.33-.91,5.61-3.78,5.61-8.41v-2.44c0-5.91-2.32-9.08-8.71-9.08h-8.96v42.65h9.14c6.52,0,9.32-3.72,9.32-9.87v-3.72c0-4.81-1.77-8.22-6.4-9.14Zm-9.26-17.36h6.09c4.57,0,5.97,2.32,5.97,6.76v2.74c0,5.42-2.32,6.76-7.31,6.76h-4.75V3.05Zm12.85,30.16c0,4.75-1.83,7.37-6.52,7.37h-6.34v-18.7h5.3c5.06,0,7.55,1.95,7.55,7.49v3.84Z"/><polygon points="175.46 .49 172.65 .49 172.65 43.13 188.86 43.13 188.86 40.58 175.46 40.58 175.46 .49"/><polygon points="209.88 3.05 209.88 .49 193.06 .49 193.06 43.13 209.88 43.13 209.88 40.58 195.87 40.58 195.87 22.79 207.5 22.79 207.5 20.23 195.87 20.23 195.87 3.05 209.88 3.05"/>
                </g>
                <g fill="url(#lg-gold-main)">
                    <path d="m224.32.49h-9.87v42.65h6.7v-16.02h3.17c6.7,0,9.99-3.72,9.99-10.54v-5.54c0-6.82-3.29-10.54-9.99-10.54Zm3.29,16.51c0,3.05-1.16,4.02-3.29,4.02h-3.17V6.58h3.17c2.13,0,3.29.97,3.29,4.02v6.4Z"/><polygon points="244.42 .49 237.72 .49 237.72 43.13 255.45 43.13 255.45 37.04 244.42 37.04 244.42 .49"/><path d="m271.71,33.39c0,3.05-1.34,4.14-3.47,4.14s-3.47-1.1-3.47-4.14V.49h-6.7v32.47c0,6.82,3.41,10.72,9.99,10.72s9.99-3.9,9.99-10.72V.49h-6.34v32.9Z"/><path d="m288.47,10.3c0-3.05,1.22-4.2,3.35-4.2s3.35,1.16,3.35,4.2v1.77h6.34v-1.34c0-6.82-3.35-10.72-9.87-10.72s-9.87,3.9-9.87,10.72c0,12.18,13.1,13.83,13.1,22.6,0,3.05-1.34,4.14-3.47,4.14s-3.47-1.1-3.47-4.14v-3.05h-6.34v2.62c0,6.82,3.41,10.72,9.99,10.72s9.99-3.9,9.99-10.72c0-12.18-13.1-13.83-13.1-22.6Z"/>
                    <path d="m32.51,38.57h-4c-.99,0-1.79-.8-1.79-1.79v-1.55c-.03-.21-.06-.42-.06-.63v-9.22h-9.22c-.14,0-.28,0-.42-.02h-1.62c-.99,0-1.79-.8-1.79-1.79v-4c0-.99.8-1.79,1.79-1.79h11.26v-9.21c0-.22.02-.42.06-.63v-1.38c0-.99.8-1.79,1.79-1.79h4c.99,0,1.79.8,1.79,1.79v11.22h9.1V6.47c0-3.57-2.9-6.47-6.47-6.47H6.74C3.17,0,.27,2.9.27,6.47v30.2c0,3.57,2.9,6.47,6.47,6.47h30.2c3.57,0,6.47-2.9,6.47-6.47v-11.28h-9.1v11.4c0,.99-.8,1.79-1.79,1.79Z"/>
                </g>
                <rect fill="url(#lg-gold-main)" x="209.98" y="58.3" width="91.7" height=".64"/>
                <rect fill="url(#lg-gold-main)" y="58.3" width="91.7" height=".64"/>
            </svg>
        );

        const App = () => {
            const [amount, setAmount] = useState(100000);
            const [months, setMonths] = useState(60);
            const [basePrime, setBasePrime] = useState(5.5);
            const [primeSpread, setPrimeSpread] = useState(1.7);
            const [fixedInterest, setFixedInterest] = useState(4.4);
            const [balloonAmount, setBalloonAmount] = useState(0);
            const [loanRoute, setLoanRoute] = useState('prime'); 
            const [expectedInflation, setExpectedInflation] = useState(2); 
            const [useInflation, setUseInflation] = useState(false);
            const [activeTab, setActiveTab] = useState('analysis');

            const formatNum = (num) => Math.round(num).toLocaleString('he-IL');

            const calculation = useMemo(() => {
                const annualInterestRate = (loanRoute === 'prime' ? (basePrime + primeSpread) : fixedInterest) / 100;
                const monthlyRate = annualInterestRate / 12;
                const monthlyInf = (loanRoute === 'fixed' && useInflation) ? (expectedInflation / 100 / 12) : 0;
                
                const loanPrincipal = amount - balloonAmount;
                
                let basePmt = 0;
                if (monthlyRate === 0) {
                    basePmt = loanPrincipal / months;
                } else {
                    basePmt = (loanPrincipal * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -months));
                }
                
                const firstPayment = basePmt + (balloonAmount * monthlyRate);

                const schedule = [];
                let currentPrincipalBalance = amount;
                let totalPaidActual = 0;
                let totalInterestOnly = 0;
                let totalInflationOnly = 0;

                for (let i = 1; i <= months; i++) {
                    const interestBasePart = currentPrincipalBalance * monthlyRate;
                    const actualPrinPart = basePmt - interestBasePart;
                    const infFactor = Math.pow(1 + monthlyInf, i);
                    
                    const monthlyPaymentWithBalloonInt = (basePmt + (balloonAmount * monthlyRate)) * infFactor;
                    const interestWithInf = (interestBasePart + (balloonAmount * monthlyRate)) * infFactor;
                    const principalWithInf = actualPrinPart * infFactor;
                    
                    totalPaidActual += monthlyPaymentWithBalloonInt;
                    totalInterestOnly += (interestBasePart + (balloonAmount * monthlyRate));
                    totalInflationOnly += (monthlyPaymentWithBalloonInt - (basePmt + (balloonAmount * monthlyRate)));
                    
                    schedule.push({ 
                        month: i, 
                        payment: monthlyPaymentWithBalloonInt, 
                        interest: interestWithInf, 
                        principal: principalWithInf, 
                        balance: Math.max(0, currentPrincipalBalance - actualPrinPart) 
                    });
                    
                    currentPrincipalBalance -= actualPrinPart;
                }

                const finalBalloonInfFactor = Math.pow(1 + monthlyInf, months);
                const finalBalloonLinked = balloonAmount * finalBalloonInfFactor;
                
                totalPaidActual += finalBalloonLinked;
                totalInflationOnly += (finalBalloonLinked - balloonAmount);

                const lastPaymentVal = schedule[schedule.length - 1]?.payment + finalBalloonLinked;

                return { 
                    firstPayment, 
                    lastPayment: lastPaymentVal, 
                    totalPaid: totalPaidActual, 
                    totalInterest: totalInterestOnly, 
                    totalInflation: totalInflationOnly, 
                    schedule 
                };
            }, [amount, months, basePrime, primeSpread, fixedInterest, balloonAmount, loanRoute, expectedInflation, useInflation]);

            const handleShare = async () => {
                const routeName = loanRoute === 'prime' ? 'פריים' : 'קבועה צמודה';
                let text = `*סימולציית הלוואה - CrediblePlus*\n`;
                text += `סכום: ₪${amount.toLocaleString()}\n`;
                text += `תקופה: ${months} חודשים\n`;
                text += `מסלול: ${routeName}\n`;
                text += `החזר חודשי ראשון: ₪${formatNum(calculation.firstPayment)}\n`;
                text += `סה"כ החזר: ₪${formatNum(calculation.totalPaid)}\n\n`;
                
                if (navigator.share) {
                    try { await navigator.share({ title: 'CrediblePlus סימולציה', text: text }); } catch (err) {}
                } else {
                    const el = document.createElement('textarea');
                    el.value = text;
                    document.body.appendChild(el);
                    el.select();
                    document.execCommand('copy');
                    document.body.removeChild(el);
                    alert('הנתונים הועתקו ללוח');
                }
            };

            return (
                <div className="min-h-screen text-slate-200 p-4 flex flex-col items-center overflow-x-hidden w-full">
                    <div className="w-full flex flex-col items-center py-6 mb-2 no-print"><Logo /></div>
                    
                    <div className="w-full max-w-md space-y-4 no-print">
                        <div className="grid grid-cols-2 gap-3">
                            <div className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50">
                                <label className="text-[11px] text-slate-400 block mb-1 uppercase text-center">סכום המימון</label>
                                <input type="text" value={amount.toLocaleString()} onChange={e => setAmount(Number(e.target.value.replace(/\D/g,'')))} className="bg-transparent w-full outline-none text-white font-light" />
                            </div>
                            <div className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50">
                                <label className="text-[11px] text-slate-400 block mb-1 uppercase text-center">סכום הבלון</label>
                                <input type="text" value={balloonAmount.toLocaleString()} onChange={e => setBalloonAmount(Number(e.target.value.replace(/\D/g,'')))} className="bg-transparent w-full outline-none text-white font-light" />
                            </div>
                            <div className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50">
                                <label className="text-[11px] text-slate-400 block mb-1 uppercase text-center">תקופה (חודשים)</label>
                                <input type="number" value={months} onChange={e => setMonths(Number(e.target.value))} className="bg-transparent w-full outline-none text-white font-light" />
                            </div>
                            <div onClick={() => setLoanRoute(loanRoute === 'prime' ? 'fixed' : 'prime')} className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50 flex flex-col justify-center items-center cursor-pointer hover:bg-slate-800 transition-colors">
                                <label className="text-[11px] text-slate-400 block mb-1 uppercase">מסלול</label>
                                <div className="flex items-center gap-2 text-[#c89644]">
                                    <i data-lucide={loanRoute === 'prime' ? 'refresh-cw' : 'trending-up'} style={{width:14}}></i>
                                    <span className="text-[13px] font-medium">{loanRoute === 'prime' ? 'פריים' : 'קבועה צמודה'}</span>
                                </div>
                            </div>
                            {loanRoute === 'prime' ? (
                                <>
                                    <div className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50">
                                        <label className="text-[11px] text-slate-400 block mb-1 uppercase text-center">ריבית בסיס (%)</label>
                                        <input type="number" step="0.01" value={basePrime} onChange={e => setBasePrime(Number(e.target.value))} className="bg-transparent w-full outline-none text-white font-light" />
                                    </div>
                                    <div className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50">
                                        <label className="text-[11px] text-slate-400 block mb-1 uppercase text-center">מרווח (Spread)</label>
                                        <input type="number" step="0.01" value={primeSpread} onChange={e => setPrimeSpread(Number(e.target.value))} className="bg-transparent w-full outline-none text-[#c89644] font-light" />
                                    </div>
                                </>
                            ) : (
                                <div className="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50 col-span-2">
                                    <label className="text-[11px] text-slate-400 block mb-1 uppercase text-center">ריבית נקובה (%)</label>
                                    <input type="number" step="0.01" value={fixedInterest} onChange={e => setFixedInterest(Number(e.target.value))} className="bg-transparent w-full outline-none text-[#c89644] font-medium" />
                                </div>
                            )}
                        </div>

                        {loanRoute === 'fixed' && (
                            <div className="p-4 bg-[#c89644]/10 rounded-2xl border border-[#c89644]/30 flex flex-col gap-3">
                                <div className="flex items-center justify-between">
                                    <span className="text-sm font-medium">חישוב אינפלציה צפויה</span>
                                    <div onClick={() => setUseInflation(!useInflation)} className={`w-12 h-6 rounded-full relative transition-all cursor-pointer ${useInflation ? 'bg-[#c89644]' : 'bg-slate-600'}`}>
                                        <div className={`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-md ${useInflation ? 'right-1' : 'right-7'}`} />
                                    </div>
                                </div>
                                {useInflation && (
                                    <div className="flex items-center justify-between pt-2 border-t border-[#c89644]/20">
                                        <span className="text-xs text-slate-300">שיעור אינפלציה שנתית</span>
                                        <div className="flex items-center gap-2">
                                            <input type="number" value={expectedInflation} onChange={e => setExpectedInflation(Number(e.target.value))} className="bg-[#1e293b] text-white px-3 py-1.5 rounded-xl w-24 text-center text-lg outline-none border border-slate-700" />
                                            <span className="text-[#c89644] font-bold">%</span>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        <div className="bg-[#c89644] rounded-[1.2rem] py-4 px-8 shadow-2xl text-center text-white">
                            <p className="text-white/80 text-[10px] mb-0.5 font-light uppercase tracking-widest">החזר חודשי ראשוני</p>
                            <div className="flex items-center justify-center gap-1">
                                <span className="text-xl font-light">₪</span>
                                <span className="text-3xl font-medium tracking-tighter">{formatNum(calculation.firstPayment)}</span>
                            </div>
                        </div>

                        <div className="bg-white rounded-[1.5rem] overflow-hidden shadow-2xl text-slate-900 border border-slate-100">
                            <div className="flex bg-slate-50 p-1">
                                <button onClick={() => setActiveTab('analysis')} className={`flex-1 py-3 text-[11px] font-medium rounded-xl transition-all ${activeTab === 'analysis' ? 'text-[#c89644] bg-white shadow-sm' : 'text-slate-400'}`}>ניתוח נתונים</button>
                                <button onClick={() => setActiveTab('schedule')} className={`flex-1 py-3 text-[11px] font-medium rounded-xl transition-all ${activeTab === 'schedule' ? 'text-[#c89644] bg-white shadow-sm' : 'text-slate-400'}`}>לוח סילוקין</button>
                            </div>
                            <div className="p-6">
                                {activeTab === 'analysis' ? (
                                    <div className="space-y-4">
                                        <div className="grid grid-cols-2 gap-3">
                                            <div className="bg-slate-50 p-3 rounded-xl border border-slate-100 text-center">
                                                <p className="text-[9px] text-slate-400 uppercase font-light">סה"כ ריבית</p>
                                                <p className="text-sm font-bold">₪{formatNum(calculation.totalInterest)}</p>
                                            </div>
                                            <div className="bg-slate-50 p-3 rounded-xl border border-slate-100 text-center">
                                                <p className="text-[9px] text-slate-400 uppercase font-light">סה"כ הצמדה</p>
                                                <p className="text-sm font-bold text-[#c89644]">₪{formatNum(calculation.totalInflation)}</p>
                                            </div>
                                        </div>
                                        <div className="bg-slate-900 p-5 rounded-2xl text-center text-white">
                                            <p className="text-[10px] text-slate-400 uppercase mb-1">
                                                עלות ההלוואה הכוללת ({loanRoute === 'prime' ? 'קרן + ריבית' : 'קרן + ריבית + הצמדה'})
                                            </p>
                                            <p className="text-2xl font-bold">₪{formatNum(calculation.totalPaid)}</p>
                                            <div className="mt-2 text-[10px] text-[#c89644] font-light">
                                                עלות נוספת מעבר לקרן: ₪{formatNum(calculation.totalPaid - amount)}
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <div>
                                        <div className="flex justify-between items-center mb-4">
                                            <h3 className="text-xs font-medium">לוח סילוקין {loanRoute === 'prime' ? 'פריים' : 'מוצמד'}</h3>
                                            <button onClick={handleShare} className="p-2 bg-[#c89644] rounded-full text-white shadow-md active:scale-95 transition-transform">
                                                <i data-lucide="share-2" style={{width:16, height:16}}></i>
                                            </button>
                                        </div>
                                        <div className="max-h-[300px] overflow-y-auto custom-scrollbar">
                                            <table className="w-full text-[10px] text-right">
                                                <thead className="sticky top-0 bg-white shadow-sm">
                                                    <tr className="text-slate-400 border-b border-slate-100">
                                                        <th className="py-2 pr-2">חודש</th><th className="py-2">קרן</th><th className="py-2">ריבית</th><th className="py-2">תשלום</th><th className="py-2 pl-2">יתרה</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {calculation.schedule.map((row, idx) => (
                                                        <tr key={idx} className="border-b border-slate-50 hover:bg-slate-50/50">
                                                            <td className="py-2 pr-2 text-slate-400">{row.month}</td><td>₪{formatNum(row.principal)}</td><td>₪{formatNum(row.interest)}</td><td className="font-bold">₪{formatNum(row.payment)}</td><td className="py-2 pl-2 text-slate-400">₪{formatNum(row.balance)}</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        <div className="text-center py-6 space-y-2">
                            <p className="text-[11px] text-[#c89644] font-medium">כל הזכויות שמורות לקרדיבל פלוס בע״מ</p>
                            <p className="text-[9px] text-slate-500 font-light italic leading-relaxed px-4">
                                מחשבון לשימוש פנימי של חברת קרדיבל פלוס בע״מ בלבד ואינו מהווה הצעה מחייבת
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

        const initIcons = () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            } else {
                setTimeout(initIcons, 100);
            }
        };
        setTimeout(initIcons, 100);
    </script>
</body>
</html>
